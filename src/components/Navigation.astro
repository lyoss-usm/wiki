---
const navigationItems = [
  {
    title: "FUNDAMENTOS",
    isSection: true,
    items: [
      {
        label: "¿Qué es Linux?",
        href: "/fundamentos/que-es-linux",
        active: false,
      },
      {
        label: "Instalación del sistema",
        href: "/fundamentos/instalacion",
        active: false,
      },
      {
        label: "La terminal y el shell",
        href: "/fundamentos/terminal",
        active: false,
      },
    ],
  },
  {
    title: "COMANDOS BÁSICOS",
    isSection: true,
    items: [
      {
        label: "Navegación del sistema de archivos",
        href: "/comandos/navegacion",
        active: false,
      },
      {
        label: "Gestión de archivos y directorios",
        href: "/comandos/archivos",
        active: false,
      },
      {
        label: "Visualización de contenido",
        href: "/comandos/visualizacion",
        active: false,
      },
      {
        label: "Búsqueda y filtrado",
        href: "/comandos/busqueda",
        active: false,
      },
      {
        label: "Redirección y pipes",
        href: "/comandos/redireccion",
        active: false,
      },
    ],
  },
  {
    title: "ADMINISTRACIÓN DEL SISTEMA",
    isSection: true,
    items: [
      { label: "Gestión de paquetes", href: "/admin/paquetes", active: false },
      { label: "Usuarios y grupos", href: "/admin/usuarios", active: false },
      { label: "Permisos de archivos", href: "/admin/permisos", active: false },
      { label: "Procesos y servicios", href: "/admin/procesos", active: false },
      { label: "Redes y conectividad", href: "/admin/redes", active: false },
      {
        label: "Configuración del sistema",
        href: "/admin/configuracion",
        active: false,
      },
    ],
  },
];
---

<aside class="sidebar">
  <nav class="nav">
    {
      navigationItems.map((section) => (
        <div class="nav-section">
          {section.isSection ? (
            <div class="section-title">{section.title}</div>
          ) : (
            <a href={section.items[0]?.href || "#"} class="nav-header">
              <span class="nav-icon">
                {section.icon === "terminal" && (
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <polyline points="4 17 10 11 4 5" />
                    <line x1="12" y1="19" x2="20" y2="19" />
                  </svg>
                )}
              </span>
              <span class="nav-label">{section.title}</span>
            </a>
          )}
          <ul class="nav-list">
            {section.items.map((item) => (
              <li>
                <a
                  href={item.href}
                  class:list={["nav-link", { active: item.active ?? false }]}
                >
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
        </div>
      ))
    }
  </nav>
</aside>

<style>
  .sidebar {
    width: 260px;
    min-width: 260px;
    background: var(--bg-nav);
    border-right: 1px solid var(--border-color);
    height: calc(100vh - 56px);
    position: sticky;
    top: 56px;
    overflow-y: auto;
    padding: 20px 0;
  }

  /* Scrollbar personalizada para sidebar */
  .sidebar::-webkit-scrollbar {
    width: 6px;
  }

  .sidebar::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 3px;
  }

  .sidebar::-webkit-scrollbar-thumb:hover {
    background: var(--accent-primary);
  }

  .nav {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .nav-section {
    margin-bottom: 12px;
  }

  .section-title {
    font-size: 10px;
    font-weight: 700;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 16px 20px 8px;
    opacity: 0.8;
  }

  .nav-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 20px;
    margin: 0 12px;
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.2s ease;
    background: transparent;
  }

  .nav-header:hover {
    background: var(--bg-hover);
    text-decoration: none;
    box-shadow: 0 0 0 1px var(--border-color);
  }

  .nav-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: var(--gradient-primary);
    border-radius: 6px;
    color: var(--bg-primary);
  }

  .nav-label {
    color: var(--text-primary);
  }

  .nav-list {
    list-style: none;
    margin: 0;
    padding: 0 12px;
  }

  .nav-link {
    display: block;
    padding: 8px 12px 8px 16px;
    color: var(--text-secondary);
    font-size: 13px;
    text-decoration: none;
    transition: all 0.2s ease;
    border-left: 2px solid transparent;
    border-radius: 0 6px 6px 0;
    margin-left: 8px;
    position: relative;
  }

  .nav-link::before {
    content: "";
    position: absolute;
    left: -2px;
    top: 50%;
    transform: translateY(-50%);
    width: 2px;
    height: 0;
    background: var(--gradient-primary);
    border-radius: 1px;
    transition: height 0.2s ease;
  }

  .nav-link:hover {
    color: var(--text-primary);
    background: var(--bg-hover);
    text-decoration: none;
  }

  .nav-link:hover::before {
    height: 60%;
  }

  .nav-link.active {
    color: var(--accent-primary);
    background: color-mix(in srgb, var(--accent-primary) 10%, transparent);
    font-weight: 500;
  }

  .nav-link.active::before {
    height: 80%;
    background: var(--accent-primary);
  }

  /* For section items without icon indent */
  .nav-section:has(.section-title) .nav-link {
    padding-left: 16px;
    margin-left: 0;
  }

  .nav-section:has(.section-title) .nav-link::before {
    left: 0;
  }

  @media (max-width: 768px) {
    .sidebar {
      display: none;
    }
  }
</style>
